version: "3.9"

services:
  jenkins:
    hostname: jenkins
    container_name: jenkins
    image: jenkins/jenkins:lts
    privileged: true
    user: root
    ports: 
      - "8080:8080"
      - "50000:50000"
    volumes:
     - /var/jenkins_home:/var/jenkins_home
     - /var/run/docker.sock:/var/run/docker.sock
    expose:
      - 4444
  agent:
    hostname: agent
    container_name: agent
    image: jenkins/ssh-agent:jdk11
    privileged: true
    user: root
    expose:
      - 22
    environment:
      - JENKINS_AGENT_SSH_PUBKEY=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCzn4Psu9H4tcTOA75g3zBHVr2S/gUS8qNUofWQmgyZq3Rk3WoJgnNgcwfyZOYSVaE0wC+C2PCS6MbnfSz/jql/2aFTmAZTeU7x+vNoOkRjr9C2POH0KjAlnO4tFWBePepj7I6BscuTBardN6ezaE0KHIxty3Y7QGIidTgLaeKZxGy9EWSLC72PYz50w7m3OifZ+NAcjyQ8x9tfJ1cVy4Kn3SjCfx4hoh/igJbSychg0fe6S2jWNS73kl74sH4tMucb/ReNUK+Qg5q7s+sri6seiRsN05X3IeDX6P/MKhxt5hanX2sVgpOiLGdxBlp5ipIDDvzzm1GHspgyx2P5wuktyn8tpoztWinXtd++WGQbjCfzlWDVEhPyE6uBz5kYDIkHKl/VltOxzjxSs0PgsUet/Zs8qqlDmClY7M+Za8SkHikJcx3AlnzniYOotXUfZLHLJYUiapfyo3xFPBxwd4fyzNaYYGfsXA7p6WP4VTjI+zyvHdBNJavGBenHXmYdXNk= root@DESKTOP-KHV7816